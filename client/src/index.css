@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom navigation spacing for smartphone portrait mode */
@media (max-width: 640px) and (orientation: portrait) {
  .navigation-container {
    margin-left: 0 !important;
    margin-right: 0 !important;
  }
  
  /* Reduce spacing between navigation icons for better fit */
  .navigation-container .flex {
    padding-left: 0.25rem !important;
    padding-right: 0.25rem !important;
  }
  
  .navigation-container button {
    padding: 0.5rem !important;
  }
}

:root {
  --background: hsl(0, 0%, 100%);
  --foreground: hsl(20, 14.3%, 4.1%);
  --muted: hsl(60, 4.8%, 95.9%);
  --muted-foreground: hsl(25, 5.3%, 44.7%);
  --popover: hsl(0, 0%, 100%);
  --popover-foreground: hsl(20, 14.3%, 4.1%);
  --card: hsl(0, 0%, 100%);
  --card-foreground: hsl(20, 14.3%, 4.1%);
  --border: hsl(20, 5.9%, 90%);
  --input: hsl(20, 5.9%, 90%);
  --primary: hsl(217, 82%, 55%);
  --primary-foreground: hsl(211, 100%, 99%);
  --secondary: hsl(217, 19%, 27%);
  --secondary-foreground: hsl(210, 40%, 98%);
  --accent: hsl(43, 96%, 56%);
  --accent-foreground: hsl(24, 9.8%, 10%);
  --destructive: hsl(0, 84.2%, 60.2%);
  --destructive-foreground: hsl(60, 9.1%, 97.8%);
  --ring: hsl(20, 14.3%, 4.1%);
  --radius: 0.5rem;
  --neutral: hsl(210, 20%, 98%);
}

.dark {
  --background: hsl(240, 10%, 3.9%);
  --foreground: hsl(0, 0%, 98%);
  --muted: hsl(240, 3.7%, 15.9%);
  --muted-foreground: hsl(240, 5%, 64.9%);
  --popover: hsl(240, 10%, 3.9%);
  --popover-foreground: hsl(0, 0%, 98%);
  --card: hsl(240, 10%, 3.9%);
  --card-foreground: hsl(0, 0%, 98%);
  --border: hsl(240, 3.7%, 15.9%);
  --input: hsl(240, 3.7%, 15.9%);
  --primary: hsl(217, 82%, 55%);
  --primary-foreground: hsl(211, 100%, 99%);
  --secondary: hsl(240, 3.7%, 15.9%);
  --secondary-foreground: hsl(0, 0%, 98%);
  --accent: hsl(43, 96%, 56%);
  --accent-foreground: hsl(0, 0%, 98%);
  --destructive: hsl(0, 62.8%, 30.6%);
  --destructive-foreground: hsl(0, 0%, 98%);
  --ring: hsl(240, 4.9%, 83.9%);
  --radius: 0.5rem;
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply font-sans antialiased bg-gradient-to-br from-gray-100 to-gray-50 text-foreground;
  }
}

.touch-manipulation {
  touch-action: manipulation;
}

.nav-card:active {
  transform: scale(0.95);
}

/* Ensure proper mobile viewport */
@media (max-width: 768px) {
  .container {
    padding-left: 1rem;
    padding-right: 1rem;
  }
}

/* Loading state for images */
img {
  background-color: #f3f4f6;
}

/* Smooth transitions */
* {
  -webkit-tap-highlight-color: transparent;
}

.page-transition {
  opacity: 0;
  transition: opacity 0.3s ease-in-out;
}

.page-transition.active {
  opacity: 1;
}

/* Mobile landscape: specific pages styling */
@media (max-width: 768px) and (orientation: landscape) {
  /* CHI SIAMO: photos and videos align with navigation container width */
  body[data-page="chi-siamo"] img:not(.navigation-container *),
  body[data-page="chi-siamo"] video:not(.navigation-container *) {
    width: calc(100% - 2rem) !important;
    max-width: calc(100% - 2rem) !important;
    margin-left: auto !important;
    margin-right: auto !important;
  }
  
  /* OFFICINA, BAR: 100% screen width for photos, videos and containers with 16:9 aspect ratio */
  body[data-page="officina"] img:not(.navigation-container *),
  body[data-page="officina"] video:not(.navigation-container *),
  body[data-page="bar"] img:not(.navigation-container *),
  body[data-page="bar"] video:not(.navigation-container *),
  body[data-page="officina"] .slideshow-container,
  body[data-page="bar"] .slideshow-container,
  body[data-page="officina"] div.slideshow-container,
  body[data-page="bar"] div.slideshow-container {
    width: 100vw !important;
    max-width: 100vw !important;
    margin-left: calc(50% - 50vw) !important;
    margin-right: calc(50% - 50vw) !important;
    position: relative !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    aspect-ratio: 16/9 !important;
  }
  
  /* AUTOLAVAGGIO: reduce height of main photo to 80% */
  body[data-page="autolavaggio"] img[src*="foto_autolavaggio"] {
    height: 80% !important;
    max-height: 80% !important;
  }
  
  /* CONTATTI: restore original dimensions for barcode and emigrantwebtv logo */
  body[data-page="contatti"] img[src*="qrserver.com"],
  body[data-page="contatti"] img[src*="logoemigrant"] {
    width: auto !important;
    max-width: none !important;
    margin-left: auto !important;
    margin-right: auto !important;
    position: static !important;
    left: auto !important;
    transform: none !important;
  }
  
  /* PhotoSlideshow and VideoSlideshow: 120% width and 16:9 aspect ratio for landscape mobile (excluding home page) */
  body:not([class*="home"]) .slideshow-container,
  body:not([class*="home"]) div.slideshow-container {
    width: 120% !important;
    max-width: 120% !important;
    aspect-ratio: 16/9 !important;
    height: auto !important;
    margin-left: auto !important;
    margin-right: auto !important;
  }
  
  /* Other pages: align content containers with navigation width */
  body:not([data-page="chi-siamo"]):not([data-page="officina"]):not([data-page="bar"]):not([class*="home"]) img[class*="rounded-t-xl"],
  body:not([data-page="chi-siamo"]):not([data-page="officina"]):not([data-page="bar"]):not([class*="home"]) video[class*="rounded-t-xl"],
  body:not([data-page="chi-siamo"]):not([data-page="officina"]):not([data-page="bar"]):not([class*="home"]) div[class*="bg-gray-50"] img,
  body:not([data-page="chi-siamo"]):not([data-page="officina"]):not([data-page="bar"]):not([class*="home"]) div[class*="bg-transparent"] img,
  body:not([data-page="chi-siamo"]):not([data-page="officina"]):not([data-page="bar"]):not([class*="home"]) div[class*="bg-gray-50"] video,
  body:not([data-page="chi-siamo"]):not([data-page="officina"]):not([data-page="bar"]):not([class*="home"]) div[class*="bg-transparent"] video {
    /* Match navigation container width - accounting for container padding */
    width: calc(100% - 2rem) !important;
    max-width: calc(100% - 2rem) !important;
    margin-left: auto !important;
    margin-right: auto !important;
  }
  
  /* Ensure proper container alignment */
  body:not([class*="home"]) .container {
    padding-left: 1rem !important;
    padding-right: 1rem !important;
  }
}

/* Mobile-optimized media styles */
@media (max-width: 640px) {
  /* Force horizontal aspect ratio for all slideshow containers on mobile - same as CHI SIAMO photos */
  .slideshow-container,
  .slideshow-container > div,
  div.slideshow-container {
    width: 100% !important;
    aspect-ratio: 16/9 !important;
    height: auto !important;
  }
  
  /* Force full width adaptation for all media content on smartphones */
  img, video {
    width: 100% !important;
    max-width: 100% !important;
    object-fit: cover !important;
    object-position: center !important;
  }
  
  /* Force horizontal orientation behavior for all media inside containers - exact same as CHI SIAMO */
  .slideshow-container img,
  .slideshow-container video,
  div.slideshow-container img,
  div.slideshow-container video {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
    object-position: center !important;
  }
  
  /* Override any height classes on mobile for slideshow containers */
  .slideshow-container[class*="h-"],
  div.slideshow-container[class*="h-"],
  .slideshow-container > div[class*="h-"] {
    height: auto !important;
    aspect-ratio: 16/9 !important;
  }
  
  /* Specific override for video slideshow containers */
  .slideshow-container.relative,
  div.slideshow-container.relative {
    width: 100% !important;
    aspect-ratio: 16/9 !important;
    height: auto !important;
  }
  
  /* Better touch targets on mobile */
  button, [role="button"], .clickable {
    min-height: 44px !important;
    min-width: 44px !important;
    touch-action: manipulation;
  }
  
  /* Prevent zoom on input focus */
  input, textarea, select {
    font-size: 16px !important;
  }
  
  /* Ensure containers use full available width */
  .container {
    width: 100% !important;
    max-width: 100% !important;
    padding-left: 0.5rem !important;
    padding-right: 0.5rem !important;
  }
}
